cd ~/hormozgan-driver-pro121



#!/data/data/com.termux/files/usr/bin/bash

set -e

echo "๐ ุงุณุชูุฑุงุฑ ุฎูุฏฺฉุงุฑ ูพุฑูฺู ููุฑูุฒฺฏุงู ุฏุฑุงูุฑ"
echo "========================================"

# ุฑูฺฏโูุง
GREEN='\033[0;32m'
RED='\033[0;31m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

# ุชูุงุจุน ููุงุด
log() { echo -e "${YELLOW}[โน]${NC} $1"; }
info() { echo -e "${BLUE}[โ]${NC} $1"; }
success() { echo -e "${GREEN}[โ]${NC} $1"; }
error() { echo -e "${RED}[โ]${NC} $1"; }

# ูุณุฑ ูพุฑูฺู
PROJECT_DIR="$(pwd)"
GITHUB_REPO="https://github.com/mahdihadari59-lgtm/hormozgan-driver-website.git"
RENDER_URL="https://hormozgan-driver-pro121.onrender.com"

# ุชุงุจุน ุจุฑุฑุณ ูุถุนุช
check_status() {
    log "ุจุฑุฑุณ ูุถุนุช ูพุฑูฺู..."
    
    if [ ! -d ".git" ]; then
        error "ุงู ูพูุดู ฺฉ ุฑูพูุฒุชูุฑ Git ูุณุช!"
        exit 1
    fi
    
    # ุจุฑุฑุณ ุงุชุตุงู ุงูุชุฑูุช
    if ! ping -c 1 github.com &> /dev/null; then
        error "ุงุชุตุงู ุจู ุงูุชุฑูุช ูุดฺฉู ุฏุงุฑุฏ!"
        exit 1
    fi
    
    success "ุจุฑุฑุณ ูุถุนุช ุงูุฌุงู ุดุฏ"
}

# ุชุงุจุน ููุงุด ูุงูโูุง ุงุฌุงุฏ ุดุฏู
show_created_files() {
    log "ูุงูโูุง ุงุฌุงุฏ ุดุฏู:"
    echo ""
    echo "๐ ูุงูโูุง ุฌุฏุฏ:"
    echo "   ๐ notifications-system.html (ุณุณุชู ุงุนูุงูโูุง)"
    echo "   ๐ rating-system.html (ุณุณุชู ุงูุชุงุฒุฏู)"
    echo "   ๐ advanced-dashboard.html (ุฏุงุดุจูุฑุฏ ูพุดุฑูุชู)"
    echo "   ๐ auto-deploy.sh (ุงุณฺฉุฑูพุช ุงุณุชูุฑุงุฑ)"
    echo ""
    
    # ููุงุด ุญุฌู ูุงูโูุง
    for file in notifications-system.html rating-system.html advanced-dashboard.html; do
        if [ -f "$file" ]; then
            size=$(du -h "$file" | cut -f1)
            lines=$(wc -l < "$file")
            echo "   ๐ $file: $size, $lines ุฎุท"
        fi
    done
}

# ุชุงุจุน ุงุฏุบุงู ุจุง index.html
integrate_with_index() {
    log "ุงุฏุบุงู ูุงูโูุง ุฌุฏุฏ ุจุง ุตูุญู ุงุตู..."
    
    if [ ! -f "index.html" ]; then
        error "ูุงู index.html ุงูุช ูุดุฏ!"
        return 1
    fi
    
    # ุงุฌุงุฏ ูพุดุชุจุงู
    cp index.html index.html.backup
    success "ูพุดุชุจุงู ุงุฒ index.html ุงุฌุงุฏ ุดุฏ"
    
    # ุงุถุงูู ฺฉุฑุฏู ูุงูโูุง ุจู index.html (ุณุงุฏู ุดุฏู)
    echo "<!-- ูุงูโูุง ุฌุฏุฏ ุงุถุงูู ุดุฏู -->" >> index.html
    echo "<!-- ุณุณุชู ุงุนูุงูโูุง -->" >> index.html
    cat notifications-system.html >> index.html
    echo "<!-- ุณุณุชู ุงูุชุงุฒุฏู -->" >> index.html
    cat rating-system.html >> index.html
    echo "<!-- ุฏุงุดุจูุฑุฏ ูพุดุฑูุชู -->" >> index.html
    cat advanced-dashboard.html >> index.html
    
    success "ูุงูโูุง ุฌุฏุฏ ุจุง ุตูุญู ุงุตู ุงุฏุบุงู ุดุฏูุฏ"
}

# ุชุงุจุน ุงุฑุณุงู ุจู GitHub
push_to_github() {
    log "ุงุฑุณุงู ุชุบุฑุงุช ุจู GitHub..."
    
    # ุจุฑุฑุณ ุชุบุฑุงุช
    if git status --porcelain | grep -q .; then
        info "ุชุบุฑุงุช ุดูุงุณุง ุดุฏ:"
        git status --short
        
        # ุงุถุงูู ฺฉุฑุฏู ูุงูโูุง
        git add .
        
        # ฺฉุงูุช
        git commit -m "๐ ุงูุฒูุฏู ูุงุจูุชโูุง ุฌุฏุฏ: ุณุณุชู ุงุนูุงูุ ุงูุชุงุฒุฏู ู ุฏุงุดุจูุฑุฏ ูพุดุฑูุชู - $(date '+%Y-%m-%d %H:%M')"
        
        # ูพูุด ุจู GitHub
        info "ุงุฑุณุงู ุจู GitHub..."
        git push origin main
        
        success "ุชุบุฑุงุช ุจุง ููููุช ุจู GitHub ุงุฑุณุงู ุดุฏ"
    else
        info "ูฺ ุชุบุฑ ุจุฑุง ฺฉุงูุช ูุฌูุฏ ูุฏุงุฑุฏ"
    fi
}

# ุชุงุจุน ุจุฑุฑุณ ุงุณุชูุฑุงุฑ
check_deployment() {
    log "ุจุฑุฑุณ ุงุณุชูุฑุงุฑ ุฎูุฏฺฉุงุฑ..."
    
    info "GitHub Pages ุจุงุฏ ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุจุฑูุฒุฑุณุงู ุดูุฏ"
    info "Render ูุฒ ุจุงุฏ ุงุณุชูุฑุงุฑ ุฎูุฏฺฉุงุฑ ุฑุง ุดุฑูุน ฺฉูุฏ"
    echo ""
    echo "๐ ููฺฉโูุง ูพุฑูฺู:"
    echo "   - GitHub: $GITHUB_REPO"
    echo "   - Pages: https://mahdihadari59-lgtm.github.io/hormozgan-driver-website"
    echo "   - Render: $RENDER_URL"
    echo ""
    info "ุงุณุชูุฑุงุฑ ูุนูููุงู ฒ-ต ุฏููู ุทูู ูโฺฉุดุฏ"
}

# ุชุงุจุน ุงุตู
main() {
    echo -e "\n${GREEN}๐ฏ ุดุฑูุน ูุฑุขูุฏ ุงุณุชูุฑุงุฑ ุฎูุฏฺฉุงุฑ${NC}"
    echo "========================================"
    
    # ุจุฑุฑุณ ูุถุนุช
    check_status
    
    # ููุงุด ูุงูโูุง ุงุฌุงุฏ ุดุฏู
    show_created_files
    
    # ุงุฏุบุงู ุจุง ุตูุญู ุงุตู
    read -p "ุขุง ูโุฎูุงูุฏ ูุงูโูุง ุจุง index.html ุงุฏุบุงู ุดููุฏุ (y/n): " integrate
    if [ "$integrate" = "y" ] || [ "$integrate" = "Y" ]; then
        integrate_with_index
    fi
    
    # ุงุฑุณุงู ุจู GitHub
    read -p "ุขุง ูโุฎูุงูุฏ ุชุบุฑุงุช ุจู GitHub ุงุฑุณุงู ุดููุฏุ (y/n): " push
    if [ "$push" = "y" ] || [ "$push" = "Y" ]; then
        push_to_github
        check_deployment
    fi
    
    # ฺฏุฒุงุฑุด ููุง
    echo -e "\n${GREEN}๐ ูุฑุขูุฏ ฺฉุงูู ุดุฏ!${NC}"
    echo ""
    echo "๐ ุฎูุงุตู:"
    echo "   โ ูุงูโูุง ุฌุฏุฏ ุงุฌุงุฏ ุดุฏูุฏ"
    echo "   โ ูพุดุชุจุงู ุงุฒ index.html ฺฏุฑูุชู ุดุฏ"
    if [ "$integrate" = "y" ] || [ "$integrate" = "Y" ]; then
        echo "   โ ูุงูโูุง ุจุง index.html ุงุฏุบุงู ุดุฏูุฏ"
    fi
    if [ "$push" = "y" ] || [ "$push" = "Y" ]; then
        echo "   โ ุชุบุฑุงุช ุจู GitHub ุงุฑุณุงู ุดุฏูุฏ"
        echo "   โฑ๏ธ  ุงุณุชูุฑุงุฑ ุฎูุฏฺฉุงุฑ ุฏุฑ ุญุงู ุงูุฌุงู ุงุณุช"
    fi
    echo ""
    echo "๐ ุจุฑุง ูุดุงูุฏู ุชุบุฑุงุชุ ฺูุฏ ุฏููู ุตุจุฑ ฺฉูุฏ ุณูพุณ ุตูุญุงุช ุฑุง ุจุงุฒุฏุฏ ฺฉูุฏ"
}

# ุงุฌุฑุง ุงุณฺฉุฑูพุช
main "$@"
